---
/**
 * TableWrapper - Wraps tables for responsive horizontal scrolling
 * Auto-injected via client-side script for all tables in .content
 *
 * Features:
 * - Automatic wrapper injection
 * - Prevents double-wrapping with guard check
 */
---

<script>
  function initTables(): void {
    document
      .querySelectorAll<HTMLTableElement>(".content table")
      .forEach((table) => {
        // Skip if already wrapped
        if (table.parentElement?.classList.contains("table-wrapper")) return;
        // Guard against null parentNode to prevent orphaning table
        if (!table.parentNode) return;

        const wrapper = document.createElement("div");
        wrapper.className = "table-wrapper";
        table.parentNode.insertBefore(wrapper, table);
        wrapper.appendChild(table);
      });
  }

  document.addEventListener("DOMContentLoaded", initTables);
  document.addEventListener("astro:page-load", initTables);
</script>
