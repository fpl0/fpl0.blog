---
/**
 * EndOrnament - A handmade, paper-like illustration
 * placed at the end of the home page.
 * Theme: A vintage, Da Vinci-style graphite portrait of the author.
 */
import { Image } from "astro:assets";
import authorSketch from "../assets/fpl0-sketch.png";
---

<div class="end-ornament" aria-hidden="true">
  <Image
    src={authorSketch}
    alt="Vintage graphite sketch of the author"
    class="ornament-image"
    width={512}
  />
</div>

<style>
  .end-ornament {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: var(--space-y-xl);
    padding: var(--space-8) 0;
    width: 100%;
    /* Note: Do NOT add `opacity` or `transform` here, as it creates a formatting context
       and ruins the child's `mix-blend-mode` with the global page background! */
  }

  /* The sketch is generated on a pure white background.
     In light mode, `mix-blend-mode: multiply` makes the white entirely transparent,
     letting the warm paper background bleed through.
     We use `contrast(1.5)` to ruthlessly crush any off-white paper artifacts from the AI into pure white,
     ensuring the bounding box disappears completely. */
  .ornament-image {
    /* Scale proportionally to the site header logo */
    height: calc(var(--font-size-h2) * 5);
    width: auto;
    object-fit: contain;

    mix-blend-mode: multiply;
    filter: contrast(1.5) grayscale(1) sepia(0.2) opacity(0.75);
    transition:
      filter var(--duration-slow) var(--ease-out),
      opacity var(--duration-slow) var(--ease-out);
  }

  /* In dark mode we must isolate the graphite lines and drop the white paper:
     1. contrast(1.1) crushes any faint off-white noise to pure white (#FFFFFF).
     2. invert(1) turns the pure white to pure black (#000000).
     3. mix-blend-mode: screen; treats any pure black pixel as 100% transparent.
     4. This leaves ONLY the white sketch lines, which we then tint to true gold 
        using sepia, saturate, hue-rotate, and brightness. */
  :global([data-theme="dark"]) .ornament-image {
    mix-blend-mode: plus-lighter;
    filter: contrast(1.2) invert(1) grayscale(1) sepia(1) saturate(3)
      hue-rotate(35deg) brightness(0.9) opacity(0.85);
  }

  @media (max-width: 600px) {
    /* @breakpoint-mobile */
    .end-ornament {
      margin-top: var(--space-y-md);
      padding: var(--space-4) 0;
    }

    .ornament-image {
      height: calc(var(--font-size-h2) * 3.5);
    }
  }
</style>
